"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSpecFileCustomName = exports.getSpecFilePathName = void 0;
const core_1 = require("@angular-devkit/core");
const schematics_1 = require("@angular-devkit/schematics");
function getSpecFilePathName(name) {
    const normalizedName = (0, core_1.normalize)(name);
    const ext = (0, core_1.extname)((0, core_1.basename)(normalizedName));
    return name.split(ext)[0] + '.spec' + ext;
}
exports.getSpecFilePathName = getSpecFilePathName;
function getSpecFileCustomName(classData, templateName) {
    const templateFile = {
        path: (0, core_1.basename)((0, core_1.normalize)(templateName)),
        content: Buffer.from('')
    };
    const fileResult = (0, schematics_1.applyPathTemplate)(classData)(templateFile);
    const folderfyFn = folderfy(classData.folder);
    return typeof (fileResult === null || fileResult === void 0 ? void 0 : fileResult.path) === 'string'
        ? folderfyFn(fileResult.path
            // remove template if any
            .replace(schematics_1.TEMPLATE_FILENAME_RE, ''))
        : undefined;
}
exports.getSpecFileCustomName = getSpecFileCustomName;
function folderfy(folder) {
    return (fileName) => {
        return (0, core_1.join)((0, core_1.normalize)(folder), fileName
            // remove the path as a possible duplicate
            .replace(folder, ''));
    };
}
//# sourceMappingURL=get-spec-file-name.js.map